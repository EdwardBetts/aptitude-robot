#!/usr/bin/env perl
use strict;
use warnings;
use 5.010;
use English qw( -no_match_vars );

use Test::More;

require_ok( '@abs_top_srcdir@/aptitude-robot' );

my $aptitude_command;

$aptitude_command = Aptitude::Robot::Command->new(
    config_dir => '@abs_top_srcdir@/t/testdata/empty-config'
);
is_deeply( [ $aptitude_command->pkglist_files() ], [],
    'empty config dir should result in empty file list' );

$aptitude_command = Aptitude::Robot::Command->new(
    config_dir => '@abs_top_srcdir@/t/testdata/single-file'
);
is_deeply(
    [ $aptitude_command->pkglist_files() ],
    [ '@abs_top_srcdir@/t/testdata/single-file/pkglist.d/10_foo' ],
    'single file case',
);

$aptitude_command = Aptitude::Robot::Command->new(
    config_dir => '@abs_top_srcdir@/t/testdata/multiple-files'
);
is_deeply(
    [ $aptitude_command->pkglist_files() ],
    [
        '@abs_top_srcdir@/t/testdata/multiple-files/pkglist.d/10_foo',
        '@abs_top_srcdir@/t/testdata/multiple-files/pkglist.d/20_bar',
    ],
    'multiple file case',
);
done_testing();
